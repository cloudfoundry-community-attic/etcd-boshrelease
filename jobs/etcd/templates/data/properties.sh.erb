#!/usr/bin/env bash

# job template binding variables

# job name & index of this VM within cluster
# e.g. JOB_NAME=redis, JOB_INDEX=0
export NAME='<%= name %>'
export JOB_INDEX=<%= index %>
# full job name, like redis/0 or webapp/3
export JOB_FULL="$NAME/$JOB_INDEX"

export NAME_INDEX=<%= "#{name}-#{index}" %>

export LISTEN_ADDRESS=<%= spec.networks.send(p("networks.apps")).ip %>

export PORT=<%= p("etcd.port") %>
export PEER_PORT=<%= p("etcd.peer_port") %>
export PEER_HEARTBEAT_TIMEOUT=<%= p("etcd.peer_heartbeat_timeout") %>
export PEER_ELECTION_TIMEOUT=<%= p("etcd.peer_election_timeout") %>